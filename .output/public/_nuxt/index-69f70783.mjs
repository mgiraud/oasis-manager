import{_ as y,d as g,m as b,s as k,u as A,q as C,h as w,o as u,c as _,b as l,w as x,F as D,l as S,ak as j,k as s,t as d}from"./entry-87b30bf9.mjs";import{u as I}from"./asyncData-43007f1d.mjs";import{C as B}from"./ConfirmationDeleteModal-c456cfb9.mjs";import{I as E}from"./Icon-fefadd4a.mjs";import"./dialog-f5e7a3df.mjs";import"./use-outside-click-8678eb71.mjs";const M=g({async setup(v,{expose:a}){a();let i,e;const o=b(),n=k(),r=A(),{data:t,refresh:f}=([i,e]=C(async()=>I("admin-blog-article-list",async()=>(await o.fetchAll(),o.list))),i=await i,e(),i),m=w(!1),c=w(null),h={blogArticleStore:o,notificationStore:n,route:r,data:t,refresh:f,dialog:m,articleToDelete:c,deleteArticle:p=>{c.value=p,m.value=!0},handleDelete:async()=>{if(!!c.value){try{await o.remove(c.value.id),f(),n.showMessage("Article correctement supprim\xE9e")}catch{n.showError("Erreur dans la suppression de l'article")}m.value=!1}},ConfirmationDeleteModal:B,Icon:E};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),N={class:"flex flex-col flex-auto p-3"},F=s("div",{class:"pl-2"},"Cr\xE9er un article de blog",-1),L={class:"flex flex-row flex-wrap items-center justify-between hover:bg-gray-100 hover:text-primary-dark h-9"},P={class:"w-full md:w-1/5 flex-1 md:pl-2"},V={class:"w-full md:w-1/6 flex-initial"},q={class:"w-full md:w-1/12 flex-initial"},O={class:"w-full md:w-1/12 flex-initial"},R={class:"w-full md:w-1/12 flex-initial flex self-stretch items-stretch"},T={class:"bg-primary flex-auto flex items-stretch justify-center"},U={class:"bg-accent flex-auto flex items-stretch justify-center"},z=["onClick"];function G(v,a,i,e,o,n){const r=j;return u(),_("div",N,[l(r,{to:{name:"admin-blog-add"},class:"py-2 pl-2 pr-3 bg-primary text-white shadow-md uppercase hover:bg-primary-dark w-fit flex flex-row items-center"},{default:x(()=>[l(e.Icon,{icon:"ri-add-line",class:"fill-white w-8 h-8"}),F]),_:1}),(u(!0),_(D,null,S(e.data,t=>(u(),_("div",L,[s("div",P,d(t.title),1),s("div",V,d(t.createdBy.nickname),1),s("div",q,d(t.isPublished),1),s("div",O,d(t.showInMenu),1),s("div",R,[s("div",T,[l(r,{to:{name:"admin-blog-id",params:{id:t.id}},class:"w-full flex items-center justify-center"},{default:x(()=>[l(e.Icon,{icon:"ri-edit-line",class:"fill-white w-4 h-4"})]),_:2},1032,["to"])]),s("div",U,[s("div",{onClick:f=>e.deleteArticle(t),class:"w-full flex items-center justify-center cursor-pointer"},[l(e.Icon,{icon:"ri-delete-bin-line",class:"fill-white w-4 h-4"})],8,z)])])]))),256)),l(e.ConfirmationDeleteModal,{open:e.dialog,"onUpdate:open":a[0]||(a[0]=t=>e.dialog=t),"handle-remove":e.handleDelete},null,8,["open"])])}var $=y(M,[["render",G]]);export{$ as default};
