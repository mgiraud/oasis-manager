import{_,d as p,am as f,u as g,m as y,p as E,q as x,o as l,c as C,e as h,f as b,C as c,j as v}from"./entry-2e347780.mjs";import{u as w}from"./asyncData-bc25d67a.mjs";import{F as S}from"./FormComponent-7fed1271.mjs";import"./CheckboxField-48f65d1d.mjs";import"./TextField-5fde64fb.mjs";import"./Icon-f078fbba.mjs";const D=p({async setup(m,{expose:r}){r();let a,e;const o=f(),i=g(),s=y("page-edition",()=>null);[a,e]=E(async()=>w("async-page-edition",async()=>{await o.load(i.params.slug),s.value=o[c.EDITION].retrieved})),await a,e();const n=x(),u={pageCategoryStore:o,route:i,categoryEdition:s,notificationStore:n,submit:async(t,d)=>{t.isPublished==="true"&&(t.isPublished=!1),t.showInMenu==="true"&&(t.showInMenu=!1);try{await o.update(t.slug,t),n.showMessage("Cat\xE9gorie correctement \xE9dit\xE9e")}catch{n.showError("Erreur dans la sauvegarde la cat\xE9gorie, v\xE9rifie le formulaire"),d.setErrors(o[c.Edition].violations)}},FormComponent:S,CRUD_MODE:c};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),I={class:"flex flex-col flex-auto p-3"},M=v("h1",{class:"mb-4"},"\xC9dition d'une cat\xE9gorie",-1);function N(m,r,a,e,o,i){return l(),C("div",I,[M,e.categoryEdition?(l(),h(e.FormComponent,{key:0,category:e.categoryEdition,"onUpdate:category":r[0]||(r[0]=s=>e.categoryEdition=s),"submit-handler":e.submit,errors:e.pageCategoryStore[e.CRUD_MODE.EDITION].violations},null,8,["category","errors"])):b("",!0)])}var A=_(D,[["render",N]]);export{A as default};
