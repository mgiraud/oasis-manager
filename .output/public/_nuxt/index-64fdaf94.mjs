import{_ as y,d as b,l as g,q as A,u as k,p as j,h,o as m,c as _,b as s,w as x,F as C,k as D,ak as S,al as E,j as l,t as d}from"./entry-2e347780.mjs";import{u as B}from"./asyncData-bc25d67a.mjs";import{C as I}from"./ConfirmationDeleteModal-9c978881.mjs";import{I as N}from"./Icon-f078fbba.mjs";import"./dialog-f417b9ae.mjs";import"./use-outside-click-ea4f1ee7.mjs";const M=b({async setup(v,{expose:o}){o();let i,e;const a=g(),n=A(),r=k(),{data:t,refresh:f}=([i,e]=j(async()=>B("admin-blog-article-list",async()=>(await a.fetchAll(),a.list))),i=await i,e(),i),u=h(!1),c=h(null),w={blogArticleStore:a,notificationStore:n,route:r,data:t,refresh:f,dialog:u,articleToDelete:c,deleteArticle:p=>{c.value=p,u.value=!0},handleDelete:async()=>{if(!!c.value){try{await a.remove(c.value.id),f(),n.showMessage("Article correctement supprim\xE9e")}catch{n.showError("Erreur dans la suppression de l'article")}u.value=!1}},ConfirmationDeleteModal:I,Icon:N};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),T={class:"flex flex-col flex-auto p-3"},V=l("div",{class:"pl-2"},"Cr\xE9er un article de blog",-1),F=S('<div class="flex flex-row flex-wrap items-center justify-between h-9 border-b-2 font-bold"><div class="w-full md:w-1/5 flex-1 md:pl-2">Titre</div><div class="w-full md:w-1/6 flex-1">Tags</div><div class="w-full md:w-1/6 flex-initial">Auteur</div><div class="w-full md:w-1/12 flex-initial">Est publi\xE9 ?</div><div class="w-full md:w-1/12 flex-initial">Actions</div></div>',1),L={class:"flex flex-row flex-wrap items-center justify-between hover:bg-gray-100 hover:text-primary-dark h-9"},P={class:"w-full md:w-1/5 flex-1 md:pl-2"},q={class:"w-full md:w-1/6 flex-1"},O={class:"w-full md:w-1/6 flex-initial"},R={class:"w-full md:w-1/12 flex-initial"},U={class:"w-full md:w-1/12 flex-initial flex self-stretch items-stretch"},z={class:"bg-primary flex-auto flex items-stretch justify-center"},G={class:"bg-accent flex-auto flex items-stretch justify-center"},H=["onClick"];function J(v,o,i,e,a,n){const r=E;return m(),_("div",T,[s(r,{to:{name:"admin-blog-add"},class:"py-2 pl-2 pr-3 bg-primary text-white shadow-md uppercase hover:bg-primary-dark w-fit flex flex-row items-center"},{default:x(()=>[s(e.Icon,{icon:"ri-add-line",class:"fill-white w-8 h-8"}),V]),_:1}),F,(m(!0),_(C,null,D(e.data,t=>(m(),_("div",L,[l("div",P,d(t.title),1),l("div",q,d(t.tags?t.tags.join(", "):""),1),l("div",O,d(t.createdBy.nickname),1),l("div",R,d(t.isPublished),1),l("div",U,[l("div",z,[s(r,{to:{name:"admin-blog-id",params:{id:t.id}},class:"w-full flex items-center justify-center"},{default:x(()=>[s(e.Icon,{icon:"ri-edit-line",class:"fill-white w-4 h-4"})]),_:2},1032,["to"])]),l("div",G,[l("div",{onClick:f=>e.deleteArticle(t),class:"w-full flex items-center justify-center cursor-pointer"},[s(e.Icon,{icon:"ri-delete-bin-line",class:"fill-white w-4 h-4"})],8,H)])])]))),256)),s(e.ConfirmationDeleteModal,{open:e.dialog,"onUpdate:open":o[0]||(o[0]=t=>e.dialog=t),"handle-remove":e.handleDelete},null,8,["open"])])}var te=y(M,[["render",J]]);export{te as default};
