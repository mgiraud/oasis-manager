import{_ as S,d as E,o as l,c as h,k as t,F as T,l as C,t as g,g as y,aj as x,aw as R,u as P,a as L,E as F,e as d,w as m,b as s,f as u,av as V,as as q,q as H,ap as J,s as U,h as Q,Q as G,z as K,n as f,ad as W,J as X,M as Z,C as A}from"./entry-87b30bf9.mjs";import{u as $}from"./asyncData-43007f1d.mjs";import{I}from"./Icon-fefadd4a.mjs";import{f as ee,m as te,p as re,v as oe,N as le}from"./Notification-ee092fa7.mjs";import{T as ae}from"./Tooltip-52fdeb63.mjs";import"./use-outside-click-8678eb71.mjs";import"./use-resolve-button-type-a71a440e.mjs";import"./transition-3b170868.mjs";const se=E({setup(_,{expose:i}){i();const e={redirectTo:a=>{x(a)}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),ie={class:"bg-primary flex flex-col"},ne={class:"w-full text-center h-12 flex-row items-center justify-center flex"},ce=["onClick"],de={class:"w-full text-center text-gray-600 pb-2"},fe=t("strong",null,"Les transalpins",-1);function me(_,i,n,e,a,p){return l(),h("div",ie,[t("div",ne,[(l(),h(T,null,C([{label:"Mentions l\xE9gales",url:"mentions-legales"}],r=>t("div",{key:r.label,onClick:o=>e.redirectTo(r.url),class:"my-2 cursor-pointer text-white text-xs uppercase"},g(r.label),9,ce)),64))]),t("div",de,[y(" 2020-"+g(new Date().getFullYear())+" \u2014 ",1),fe])])}var ue=S(se,[["render",me]]);const _e=E({setup(_,{expose:i}){i();const n=R(),e=P(),a=L(),{menu:p}=F(a),o={router:n,route:e,pageStore:a,menu:p,redirectTo:c=>{c!==null&&x(c)},Menu:ee,MenuButton:te,MenuItems:re,MenuItem:oe,Icon:I};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),pe={class:"pl-2 text-xs"};function he(_,i,n,e,a,p){return l(!0),h(T,null,C(e.menu,r=>(l(),d(e.Menu,{as:"div",class:"shadow-sm md:relative flex flex-auto h-10"},{default:m(({open:o})=>[s(e.MenuButton,{onClick:c=>e.redirectTo(r.children.length===0?r.url:null),class:"w-full text-primary-dark text-center before:absolute before:top-0 tracking-widest text-xs uppercase"},{default:m(()=>[y(g(r.name)+" ",1),r.children.length>0&&!o?(l(),d(e.Icon,{key:0,icon:"ri-arrow-right-s-fill",class:"h-3 w-3 inline-flex fill-primary-dark"})):u("",!0),r.children.length>0&&o?(l(),d(e.Icon,{key:1,icon:"ri-arrow-down-s-fill",class:"h-3 w-3 inline-flex fill-primary-dark"})):u("",!0)]),_:2},1032,["onClick"]),r.children.length>0?(l(),d(V,{key:0,"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:m(()=>[s(e.MenuItems,{class:"flex flex-col flex-auto absolute left-0 top-full w-full bg-primary text-white z-10"},{default:m(()=>[(l(!0),h(T,null,C(r.children,c=>(l(),d(e.MenuItem,{onClick:v=>e.redirectTo(c.url),as:"div",class:"hover:bg-primary-dark h-10 uppercase flex-auto flex items-center cursor-pointer"},{default:m(({active:v})=>[t("div",pe,g(c.name),1)]),_:2},1032,["onClick"]))),256))]),_:2},1024)]),_:2},1024)):u("",!0)]),_:2},1024))),256)}var xe=S(_e,[["render",he]]);const ge=E({async setup(_,{expose:i}){i();let n,e;const a=q(),{isLogged:p,isAdmin:r}=F(a),o=L();[n,e]=H(()=>$("pages",()=>o.fetchAll())),await n,e();const c={email:"required|email"},v=()=>{x("/login")},z=()=>{x("/")},D=()=>{x("/admin")},Y=()=>{a.logout()},w=J(),b=U(),j=async(O,B)=>{try{await w.create(O),b.showMessage("Je suis maintenant inscris \xE0 la newsletter")}catch{b.showError(w[A.CREATION].error),B.setErrors(w[A.CREATION].violations)}},M=Q(0);function k(){M.value=window.scrollY}G(()=>{window.addEventListener("scroll",k)}),K(()=>{window.removeEventListener("scroll",k)});const N={authStore:a,isLogged:p,isAdmin:r,pageStore:o,schema:c,redirectToLogin:v,redirectToHome:z,redirectToAdmin:D,logout:Y,newsletterStore:w,notificationStore:b,submitNewsletter:j,scrollY:M,onScroll:k,Footer:ue,LayoutDefaultMenu:xe,Icon:I,Notification:le,Form:X,Field:Z,Tooltip:ae};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),we={class:"flex flex-col bg-secondary-light min-h-screen text-sm order-first"},ye={class:"fixed top-0 left-0 right-0 block z-40 bg-primary"},ve=t("div",{class:"grow"},null,-1),be={class:"h-10 inline-flex items-center pt-1 pb-2"},ke={class:"flex flex-row bg-info flex-wrap"},Te={class:"bg-white"},Ce={class:"shadow-md flex flex-row justify-center items-center flex-auto flex-wrap"},Se={class:"flex flex-row w-full group py-4 px-3"},Ee={class:"relative w-96"},Me=y("Email "),Ne={type:"submit"},Ae=t("div",{class:"mx-3 text-gray-800 text-sm"},"ET",-1),Le=t("div",{class:"grow md:grow-0"},[t("button",{class:"bg-primary hover:bg-primary-dark text-white text-sm px-3 py-1.5 shadow-md rounded-sm"},[t("span",{class:"uppercase tracking-wider font-light"},"Adh\xE8re \xE0 l'association")])],-1),Fe={class:"flex flex-col pt-48 sm:pt-64 flex-auto shadow-md mb-4"};function Ie(_,i,n,e,a,p){return l(),h("div",we,[t("header",ye,[t("div",{class:f(["bg-primary hidden md:block absolute top-0 left-0 w-full transition-all duration-200",{"h-10":e.scrollY>=50,"h-36":e.scrollY<50}])},[t("div",{class:f(["h-full bg-[url('/images/vercors.jpg')] bg-center bg-cover bg-no-repeat",{"opacity-0":e.scrollY>=50}])},null,2)],2),t("div",{class:f(["flex items-start transition-all duration-200",{"h-10":e.scrollY>=50,"h-10 md:h-36":e.scrollY<50}])},[t("div",{onClick:e.redirectToHome,class:"self-end z-40 font-marker text-lg text-white px-4 py-2 cursor-pointer"},"Les transalpins"),ve,e.isAdmin?(l(),h("div",{key:0,class:"items-center text-primary-dark z-40 mr-1 inline-flex whitespace-nowrap uppercase tracking-wider text-sm py-2 h-10 cursor-pointer",onClick:e.redirectToAdmin},"ADMIN")):u("",!0),t("div",be,[e.isLogged?u("",!0):(l(),d(e.Icon,{key:0,icon:"ri-login-box-line",onClick:e.redirectToLogin,class:"h-5 w-5 z-40 fill-primary-dark mr-1 cursor-pointer"})),e.isLogged?(l(),d(e.Icon,{key:1,icon:"ri-logout-box-line",onClick:e.logout,class:"h-5 w-5 z-40 fill-primary-dark mr-1 cursor-pointer"})):u("",!0)])],2),t("div",ke,[s(e.LayoutDefaultMenu)]),t("div",Te,[t("div",Ce,[s(e.Form,{onSubmit:e.submitNewsletter,class:"flex flex-row","validation-schema":e.schema},{default:m(({values:r,errors:o})=>[t("div",Se,[s(e.Icon,{icon:"ri-mail-line",class:f(["h-8 w-10 group-focus-within:stroke-2",{"fill-accent":!!o.email,"fill-primary":!!r.email&&!o.email,"fill-gray-500":!r.email}])},null,8,["class"]),t("div",Ee,[s(e.Field,{id:"email",name:"email",type:"email",required:"",autocomplete:"off",class:"peer w-full outline-none h-8",validateOnInput:!0}),t("label",{for:"email",class:f([{"h-1/2 -translate-y-full pl-0":!!r.email,"text-accent":!!o.email,"text-primary":!!r.email&&!o.email},"transform transition-all absolute top-0 left-0 h-full flex items-center pl-0 text-sm group-focus-within:text-xs group-focus-within:h-1/2 group-focus-within:-translate-y-full"])},[Me,o.email?(l(),d(e.Tooltip,{key:0},{default:m(()=>[y(g(o.email),1)]),_:2},1024)):u("",!0)],2),t("div",{class:f([{"border-accent":!!o.email,"border-primary":!!r.email&&!o.email,"border-gray-500":!r.email},"absolute bottom-0 -ml-8 w-[calc(100%_+_2rem)] border-b"])},null,2)])]),t("button",Ne,[s(e.Icon,{icon:"ri-send-plane-fill",class:f(["h-5 w-5",{"fill-primary hover:fill-primary-dark":!o.email&&!!r.email,"fill-gray-500":!!o.email}])},null,8,["class"])])]),_:1}),Ae,Le])])]),t("div",Fe,[W(_.$slots,"default")]),s(e.Footer),s(e.Notification)])}var qe=S(ge,[["render",Ie]]);export{qe as default};
