import{_ as y,d as g,a as b,s as k,u as C,q as D,h,o as m,c as w,b as s,w as v,F as E,l as S,ak as j,al as P,k as l,t as i}from"./entry-a96e082f.mjs";import{u as A}from"./asyncData-d8550ba9.mjs";import{C as I}from"./ConfirmationDeleteModal-82351f71.mjs";import{I as N}from"./Icon-8316deac.mjs";import"./dialog-d2f33145.mjs";import"./use-outside-click-45283c30.mjs";const M=g({async setup(p,{expose:n}){n();let a,t;const o=b(),r=k(),c=C(),{data:e,refresh:f}=([a,t]=D(async()=>A("page-list",async()=>(await o.fetchAll(),o.list))),a=await a,t(),a),u=h(!1),d=h(null),_={pageStore:o,notificationStore:r,route:c,data:e,refresh:f,dialog:u,pageToDelete:d,deletePage:x=>{d.value=x,u.value=!0},handleDelete:async()=>{if(!!d.value){try{await o.remove(d.value.url),f(),r.showMessage("Page correctement supprim\xE9e")}catch{r.showError("Erreur dans la suppression de la page")}u.value=!1}},ConfirmationDeleteModal:I,Icon:N};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),B={class:"flex flex-col flex-auto p-3"},V=l("div",{class:"pl-2"},"Cr\xE9er une page",-1),F=j('<div class="flex flex-row flex-wrap items-center justify-between hover:bg-gray-100 h-9 border-b-2 font-bold"><div class="w-full md:w-1/5 flex-1 md:pl-2">Titre</div><div class="w-full md:w-1/6 flex-initial">Url</div><div class="w-full md:w-1/6 flex-initial">Auteur</div><div class="w-full md:w-1/5 flex-1">Cat\xE9gorie</div><div class="w-full md:w-1/12 flex-initial">Est publi\xE9 ?</div><div class="w-full md:w-1/12 flex-initial">Menu</div><div class="w-full md:w-1/12 flex-initial">Actions</div></div>',1),L={class:"flex flex-row flex-wrap items-center justify-between hover:bg-gray-100 hover:text-primary-dark h-9"},T={class:"w-full md:w-1/5 flex-1 md:pl-2"},U={class:"w-full md:w-1/6 flex-initial"},q={class:"w-full md:w-1/6 flex-initial"},O={class:"w-full md:w-1/5 flex-1"},R={class:"w-full md:w-1/12 flex-initial"},z={class:"w-full md:w-1/12 flex-initial"},G={class:"w-full md:w-1/12 flex-initial flex self-stretch items-stretch"},H={class:"bg-primary flex-auto flex items-stretch justify-center"},J={class:"bg-accent flex-auto flex items-stretch justify-center"},K=["onClick"];function Q(p,n,a,t,o,r){const c=P;return m(),w("div",B,[s(c,{to:{name:"admin-pages-add"},class:"py-2 pl-2 pr-3 bg-primary text-white shadow-md uppercase hover:bg-primary-dark w-fit flex flex-row items-center"},{default:v(()=>[s(t.Icon,{icon:"ri-add-line",class:"fill-white w-8 h-8"}),V]),_:1}),F,(m(!0),w(E,null,S(t.data,e=>(m(),w("div",L,[l("div",T,i(e.title),1),l("div",U,"/"+i(e.url),1),l("div",q,i(e.createdBy.nickname),1),l("div",O,i(e.category?e.category.name:"N/A"),1),l("div",R,i(e.isPublished),1),l("div",z,i(e.showInMenu),1),l("div",G,[l("div",H,[s(c,{to:{name:"admin-pages-slug",params:{slug:e.url}},class:"w-full flex items-center justify-center"},{default:v(()=>[s(t.Icon,{icon:"ri-edit-line",class:"fill-white w-4 h-4"})]),_:2},1032,["to"])]),l("div",J,[l("div",{onClick:f=>t.deletePage(e),class:"w-full flex items-center justify-center cursor-pointer"},[s(t.Icon,{icon:"ri-delete-bin-line",class:"fill-white w-4 h-4"})],8,K)])])]))),256)),s(t.ConfirmationDeleteModal,{open:t.dialog,"onUpdate:open":n[0]||(n[0]=e=>t.dialog=e),"handle-remove":t.handleDelete},null,8,["open"])])}var se=y(M,[["render",Q]]);export{se as default};
