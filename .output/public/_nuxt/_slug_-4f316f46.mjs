import{_,d as p,al as f,u as g,p as y,q as E,s as x,o as u,c as C,e as h,f as b,C as c,k as v}from"./entry-87b30bf9.mjs";import{u as w}from"./asyncData-43007f1d.mjs";import{F as S}from"./FormComponent-97a7514f.mjs";import"./CheckboxField-d03e3edb.mjs";import"./Tooltip-52fdeb63.mjs";import"./Icon-fefadd4a.mjs";import"./TextField-1d5b5a19.mjs";const D=p({async setup(m,{expose:r}){r();let a,e;const o=f(),i=g(),s=y("page-edition",()=>null);[a,e]=E(async()=>w("async-page-edition",async()=>{await o.load(i.params.slug),s.value=o[c.EDITION].retrieved})),await a,e();const n=x(),l={pageCategoryStore:o,route:i,categoryEdition:s,notificationStore:n,submit:async(t,d)=>{t.isPublished==="true"&&(t.isPublished=!1),t.showInMenu==="true"&&(t.showInMenu=!1);try{await o.update(t.slug,t),n.showMessage("Cat\xE9gorie correctement \xE9dit\xE9e")}catch{n.showError("Erreur dans la sauvegarde la cat\xE9gorie, v\xE9rifie le formulaire"),d.setErrors(o[c.Edition].violations)}},FormComponent:S,CRUD_MODE:c};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),I={class:"flex flex-col flex-auto p-3"},k=v("h1",{class:"mb-4"},"\xC9dition d'une cat\xE9gorie",-1);function M(m,r,a,e,o,i){return u(),C("div",I,[k,e.categoryEdition?(u(),h(e.FormComponent,{key:0,category:e.categoryEdition,"onUpdate:category":r[0]||(r[0]=s=>e.categoryEdition=s),"submit-handler":e.submit,errors:e.pageCategoryStore[e.CRUD_MODE.EDITION].violations},null,8,["category","errors"])):b("",!0)])}var V=_(D,[["render",M]]);export{V as default};
