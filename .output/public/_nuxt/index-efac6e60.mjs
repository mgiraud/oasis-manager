import{_ as g,d as h,m as x,o,c as m,k as t,b as u,t as n,F as v,l as w,w as b,g as P,al as y,aj as k,a as A,q as C,r as S,e as p,f}from"./entry-a96e082f.mjs";import{u as T}from"./asyncData-d8550ba9.mjs";import{C as B}from"./Carrousel-8fa4093a.mjs";import{P as N}from"./PageComponent-2686b6fe.mjs";import{P as j}from"./PreviewImage-cc46b1f7.mjs";import{u as I}from"./useDateHelper-e4869b7b.mjs";import{u as D}from"./useStringHelper-b0dd0f5e.mjs";import{I as E}from"./Icon-8316deac.mjs";const V=h({props:{article:null},setup(_,{expose:d}){d();const a=_,{formatDate:e}=I(),{capitalize:s}=D(),l=x(),r={props:a,formatDate:e,capitalize:s,blogArticleStore:l,setActiveTag:c=>{l.$patch({activeTags:[c]}),k("/blog")},PreviewImage:j,Icon:E};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),H={class:"flex flex-col p-8"},L={class:"text-xs mt-2"},z={class:"text-secondary"},F=["datetime"],O={class:"py-4"},q={class:"max-h-64 text-ellipsis overflow-hidden"},R={class:"flex flex-wrap mt-4"},G=["onClick"],J={class:"pt-2 text-primary-dark fill-primary-dark flex uppercase text-xs"},K=P("En savoir plus");function M(_,d,a,e,s,l){const i=y;return o(),m("article",H,[t("div",null,[u(e.PreviewImage,{"media-object":e.blogArticleStore.getRandomImage(a.article),class:"max-h-44 object-contain","max-height":"44"},null,8,["media-object"])]),t("div",L,[t("div",z,n(e.capitalize(e.props.article.createdBy.nickname)),1)]),t("div",null,[t("time",{datetime:a.article.createdAt,class:"text-xs uppercase tracking-wider"},n(e.formatDate(a.article.createdAt)),9,F)]),t("header",O,[t("h2",null,n(a.article.title),1)]),t("section",q,[t("p",null,n(a.article.preview),1)]),t("footer",null,[t("div",R,[(o(!0),m(v,null,w(a.article.tags,(r,c)=>(o(),m("div",{key:c,class:"bg-primary-dark text-white uppercase px-2 py-1 rounded-tl-lg rounded-br-lg mx-1 mb-1 text-xs cursor-pointer",onClick:ee=>e.setActiveTag(r)},n(r),9,G))),128))]),t("div",J,[u(e.Icon,{icon:"ri-arrow-right-s-line",class:"h-4 w-4"}),u(i,{to:{name:"blog-id",params:{id:a.article.id}}},{default:b(()=>[K]),_:1},8,["to"])])])])}var Q=g(V,[["render",M]]);const U=h({async setup(_,{expose:d}){d();let a,e;const s=x(),l=A();[a,e]=C(()=>T("articles",()=>s.fetchAll({"order[createdAt]":"desc",itemsPerPage:8}))),await a,e();const i=l.findBySlug("home"),r=s.list,c={blogArticleStore:s,pageStore:l,homePage:i,articles:r,Carrousel:B,PageComponent:N,ArticlePreviewComponent:Q};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),W={class:"flex bg-white flex-auto flex-col"},X={class:"p-3 w-full md:w-4/5 self-center"},Y={class:"flex flex-wrap md:w-4/5 lg:w-3/4 self-center"},Z=P("Habitat participatif situ\xE9 vers la r\xE9gion grenobloise");function $(_,d,a,e,s,l){const i=S("Title");return o(),m("div",W,[e.homePage!==null&&e.homePage.mediaNode!==null?(o(),p(e.Carrousel,{key:0,"media-node":e.homePage.mediaNode},null,8,["media-node"])):f("",!0),e.homePage?(o(),p(e.PageComponent,{key:1,page:e.homePage,class:"md:w-4/5"},null,8,["page"])):f("",!0),t("h2",X,"Les "+n(e.articles.length)+" derniers articles",1),t("div",Y,[(o(!0),m(v,null,w(e.articles,r=>(o(),p(e.ArticlePreviewComponent,{article:r,class:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4"},null,8,["article"]))),256))]),u(i,null,{default:b(()=>[Z]),_:1})])}var ne=g(U,[["render",$]]);export{ne as default};
