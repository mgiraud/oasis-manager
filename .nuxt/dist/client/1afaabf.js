(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{526:function(e,t,n){"use strict";var r=n(5),o=Object(r.b)({props:{handleDelete:{type:Function,default:function(){}},visible:{type:Boolean,default:!0}},setup:function(e,t){var n=t.emit;return{setVisible:function(e){n("close")},show:Object(r.a)((function(){return e.visible}))}}}),l=n(32),c=n(41),d=n.n(c),v=n(126),f=n(209),m=n(168),h=n(572),_=n(520),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-text",[e._v("Are you sure you want to delete this item?")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"error darken-1"},on:{click:e.handleDelete}},[e._v("\n        Delete\n      ")]),e._v(" "),n("v-btn",{attrs:{color:"secondary darken-1",text:""},on:{click:function(t){return t.stopPropagation(),e.setVisible(!1)}}},[e._v("\n        Cancel\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;d()(component,{VBtn:v.a,VCard:f.a,VCardActions:m.a,VCardText:m.b,VDialog:h.a,VSpacer:_.a})},528:function(e,t,n){"use strict";var r=n(5),o=n(526),l=Object(r.b)({components:{ConfirmDelete:o.a},props:{handleBack:{type:Function,default:null},handleEdit:{type:Function,default:null},handleSubmit:{type:Function,default:null},handleReset:{type:Function,default:null},handleDelete:{type:Function,default:null},handleAdd:{type:Function,default:null},title:{type:String,default:""},isLoading:{type:Boolean,default:!1}},setup:function(e){return{confirmDelete:Object(r.m)(!1),goBack:function(){e.handleBack&&e.handleBack()},addItem:function(){e.handleAdd&&e.handleAdd()},editItem:function(){e.handleEdit&&e.handleEdit()},submitItem:function(){e.handleSubmit&&e.handleSubmit()},resetItem:function(){e.handleReset&&e.handleReset()}}}}),c=n(32),d=n(41),v=n.n(d),f=n(126),m=n(203),h=n(520),_=n(54),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{attrs:{flat:"",bottom:""}},[e._t("left"),e._v(" "),n("v-spacer"),e._v(" "),n("div",[e.handleBack?n("v-btn",{attrs:{loading:e.isLoading,color:"primary"},on:{click:e.goBack}},[e._v("\n      Retour\n    ")]):e._e(),e._v(" "),e.handleEdit?n("v-btn",{attrs:{loading:e.isLoading,color:"primary"},on:{click:e.editItem}},[e._v("\n      Editer\n    ")]):e._e(),e._v(" "),e.handleSubmit?n("v-btn",{attrs:{loading:e.isLoading,color:"primary"},on:{click:e.submitItem}},[e._v("\n      Envoyer\n    ")]):e._e(),e._v(" "),e.handleReset?n("v-btn",{staticClass:"ml-sm-2",on:{click:e.resetItem}},[e._v("\n      Reinitialiser\n    ")]):e._e(),e._v(" "),e.handleDelete?n("v-btn",{staticClass:"ml-sm-2",attrs:{color:"error"},on:{click:function(t){e.confirmDelete=!0}}},[e._v("\n      Supprimer\n    ")]):e._e(),e._v(" "),e.handleAdd?n("v-btn",{attrs:{color:"primary",rounded:""},on:{click:e.addItem}},[n("v-icon",[e._v("ri-add-line")])],1):e._e()],1),e._v(" "),e.handleDelete?n("ConfirmDelete",{attrs:{visible:e.confirmDelete,"handle-delete":e.handleDelete},on:{close:function(t){e.confirmDelete=!1}}}):e._e()],2)}),[],!1,null,null,null);t.a=component.exports;v()(component,{VBtn:f.a,VIcon:m.a,VSpacer:h.a,VToolbar:_.a})},534:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(49);var r=n(10),o=n(18),l=n(21),c=n(28),d=n(25),v=n(15),f=(n(60),n(30),n(8),n(55),n(36),n(5));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(v.a)(e);if(t){var o=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var h=new(function(e){Object(c.a)(d,e);var t,n=m(d);function d(){var e;return Object(o.a)(this,d),(e=n.apply(this,arguments)).deleteRole="USER_CAN_DELETE_GALLERIES",e.editRole="USER_CAN_EDIT_GALLERIES",e.listRole="USER_CAN_ACCESS_GALLERIES",e.tree=Object(f.a)((function(){var t=[];return e.state.allTreeIds.forEach((function(n){var r=e.findTree(n);return t.push({"@id":r["@id"],children:r.children,name:r.name}),t})),t})),e.rootNodes=Object(f.a)((function(){return e.list.value.filter((function(e){return!e.parent}))})),e}return Object(l.a)(d,[{key:"getAdditionalData",value:function(){return{allTreeIds:[],treeById:{},treeError:"",treeIsLoading:!1,resetTree:!1}}},{key:"getAddLocation",value:function(){return null}},{key:"getEditLocation",value:function(e){return null}},{key:"getIdentifierFromUrlParam",value:function(param){return""}},{key:"getListLocation",value:function(){return null}},{key:"toggleTreeLoading",value:function(){this.state.treeIsLoading=!this.state.treeIsLoading}},{key:"resetTree",value:function(){Object.assign(this.state,{allTreeIds:[],treeById:{},treeError:"",treeIsLoading:!1,resetTree:!1})}},{key:"addTreeItem",value:function(e){this.state.treeById[e["@id"]]=e,this.state.allTreeIds.includes(e["@id"])||this.state.allTreeIds.push(e["@id"])}},{key:"handleTreeError",value:function(e){this.state.treeError=e.message}},{key:"fetchTree",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.toggleTreeLoading(),e.prev=1,e.next=4,this.context.$getRepository(this.storeName).validateAndDecodeResponse("media_nodes/tree");case 4:return t=e.sent,this.state.resetTree&&this.resetTree(),t["hydra:member"].forEach((function(e){n.addTreeItem(e)})),this.toggleTreeLoading(),e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(1),this.handleTreeError(e.t0);case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return t.apply(this,arguments)})},{key:"findTree",value:function(e){return this.state.treeById[e]}}]),d}(n(76).a))("media_nodes")},550:function(e,t,n){var content=n(575);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(17).default)("6e6fa1de",content,!0,{sourceMap:!1})},551:function(e,t,n){var content=n(577);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(17).default)("3f082308",content,!0,{sourceMap:!1})},552:function(e,t,n){var content=n(579);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(17).default)("570f4478",content,!0,{sourceMap:!1})},574:function(e,t,n){"use strict";n(550)},575:function(e,t,n){var r=n(16)(!1);r.push([e.i,".file-navigator-breadcrumb-container[data-v-2693157e]{display:inline-block;cursor:pointer}",""]),e.exports=r},576:function(e,t,n){"use strict";n(551)},577:function(e,t,n){var r=n(16)(!1);r.push([e.i,".context-menu[data-v-2d92cf33]{top:0;left:0;margin:0;padding:0;display:none;position:fixed;z-index:1000000}.context-menu--active[data-v-2d92cf33]{display:block}",""]),e.exports=r},578:function(e,t,n){"use strict";n(552)},579:function(e,t,n){var r=n(16)(!1);r.push([e.i,"h3.navigator-title[data-v-ee76563c]{display:inline-block;cursor:pointer}",""]),e.exports=r},581:function(e,t,n){"use strict";n(26),n(58),n(59);var r=n(5),o=Object(r.b)({props:{thumbnails:{type:Array,required:!0},links:{type:Array,required:!0},removeThumbnail:{type:Function,required:!0},removeLink:{type:Function,required:!0}}}),l=n(32),c=n(41),d=n.n(c),v=n(126),f=n(209),m=n(168),h=n(517),_=n(523),y=n(203),j=n(165),k=n(519),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",[n("h3",[e._v("Fichiers sélectionnés")])])],1),e._v(" "),e.thumbnails.length+e.links.length===0?n("v-row",[n("v-col",[n("p",[e._v("\n        Tu peux téleverser un fichier ou utiliser le navigateur pour sélectionner les fichiers à\n        insérer\n      ")])])],1):n("v-row",{attrs:{"no-gutters":""}},[n("v-col",[n("v-container",[n("v-row",{attrs:{"no-gutters":""}},e._l(e.thumbnails,(function(t,i){return n("v-col",{key:i,attrs:{cols:"4","align-self":"center"}},[n("v-card",[n("v-img",{attrs:{src:t.src,"max-height":"200",contain:""}}),e._v(" "),n("v-card-actions",[n("v-btn",{staticClass:"btn-remove-thumbnail",attrs:{fab:"",dark:"","x-small":"",color:"error"},on:{click:function(t){return e.removeThumbnail(i)}}},[n("v-icon",{attrs:{dark:""}},[e._v("\n                    ri-close-line\n                  ")])],1)],1)],1)],1)})),1),e._v(" "),n("v-row",e._l(e.links,(function(link,i){return n("v-col",{key:i},[n("span",[e._v(e._s(link.name)),n("v-btn",{staticClass:"btn-remove-thumbnail",attrs:{fab:"",dark:"","x-small":"",color:"error"},on:{click:function(t){return e.removeLink(i)}}},[n("v-icon",{attrs:{dark:""}},[e._v("\n                ri-close-line\n              ")])],1)],1)])})),1)],1)],1)],1)],1)}),[],!1,null,null,null),O=component.exports;d()(component,{VBtn:v.a,VCard:f.a,VCardActions:m.a,VCol:h.a,VContainer:_.a,VIcon:y.a,VImg:j.a,VRow:k.a});var C=Object(r.b)({props:{handleUpload:{type:Function,required:!0}},setup:function(e){var t=Object(r.m)(null);return{fileSelection:t,openFileSelection:function(){var e;null===(e=t.value)||void 0===e||e.click()},onFileChange:function(){var n,r=null===(n=t.value)||void 0===n?void 0:n.files;r&&e.handleUpload(r)}}}}),N=Object(l.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",[n("input",{ref:"fileSelection",staticStyle:{display:"none"},attrs:{id:"fileElem",type:"file",multiple:"",accept:"image/*"},on:{change:e.onFileChange}}),e._v(" "),n("v-btn",{on:{click:e.openFileSelection}},[e._v("\n        Sélectionner des fichiers à téléverser\n      ")])],1)],1)],1)}),[],!1,null,null,null),x=N.exports;d()(N,{VBtn:v.a,VCol:h.a,VContainer:_.a,VRow:k.a});var w=n(10),V=(n(60),Object(r.b)({props:{mediaNode:{type:Object,default:null},mediaNodeClickHandler:{type:Function,required:!0}},setup:function(e){return{handleCrumbClick:function(t){e.mediaNodeClickHandler(t["@id"])}}}})),E=(n(574),Object(l.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.mediaNode?n("div",{staticClass:"file-navigator-breadcrumb-container"},e._l(e.mediaNode.breadcrumb,(function(t){return n("span",{key:t["@id"],on:{click:function(n){return e.handleCrumbClick(t)}}},[e._v(" "),n("v-icon",[e._v("ri-arrow-right-s-line")]),e._v(" "),n("v-btn",{attrs:{rounded:"",depressed:"",small:""}},[e._v(e._s(t.name))])],1)})),0):e._e()}),[],!1,null,"2693157e",null)),R=E.exports;d()(E,{VBtn:v.a,VIcon:y.a});var I=Object(r.b)({props:{mediaNode:{type:Object,required:!0},handleClick:{type:Function,required:!0}}}),S=Object(l.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",e._l(e.mediaNode.children,(function(t){return n("v-col",{key:t["@id"]},[n("v-btn",{on:{click:function(n){return e.handleClick(t["@id"])}}},[e._v("\n        "+e._s(t.name)+"\n      ")])],1)})),1)],1)}),[],!1,null,null,null),F=S.exports;d()(S,{VBtn:v.a,VCol:h.a,VContainer:_.a,VRow:k.a});n(49);var L=n(18),M=n(21),T=n(28),A=n(25),D=n(15);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(D.a)(e);if(t){var o=Object(D.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(A.a)(this,n)}}var $=new(function(e){Object(T.a)(n,e);var t=B(n);function n(){var e;return Object(L.a)(this,n),(e=t.apply(this,arguments)).deleteRole="USER_CAN_DELETE_MEDIA_OBJECTS",e.uploadRole="USER_CAN_UPLOAD_MEDIA_OBJECTS",e.editRole="USER_CAN_EDIT_MEDIA_OBJECTS",e.listRole="USER_CAN_ACCESS_GALLERIES",e}return Object(M.a)(n,[{key:"getAddLocation",value:function(){return null}},{key:"getEditLocation",value:function(e){return null}},{key:"getIdentifierFromUrlParam",value:function(param){return""}},{key:"getListLocation",value:function(){return null}}]),n}(n(76).a))("media_objects"),P=Object(r.b)({props:{mediaNode:{type:Object,required:!0},selectClickHandler:{type:Function,required:!0},editClickHandler:{type:Function,required:!0}},setup:function(e){var t=Object(r.q)(),n=Object(r.e)("selectionEnabled");$.setContext(t);var o=function(){e.mediaNode&&$.fetchAll({mediaNodes:e.mediaNode["@id"]})};return Object(r.h)((function(){o()})),Object(r.u)((function(){return e.mediaNode}),(function(e){o()})),{selectionEnabled:n,mediaObjects:$.list,loadObjects:o}}}),U=n(520),H=n(721),G=Object(l.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",e._l(e.mediaObjects,(function(t){return n("v-col",{key:t["@id"],attrs:{cols:"12",md:"6",lg:"3"}},[n("v-card",[t.isImage?n("v-img",{staticClass:"file-navigator-object",attrs:{src:t.contentUrl,"max-height":"300",contain:""}}):n("span",{staticClass:"file-navigator-object"},[e._v(e._s(t.filePath))]),e._v(" "),n("v-card-title",[t.customName?n("span",[e._v(e._s(t.customName))]):n("small",[e._v("Titre non défini")])]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),e.selectionEnabled?n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on,l=r.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""},on:{click:function(n){return e.selectClickHandler(t)}}},"v-btn",l,!1),o),[n("v-icon",[e._v("ri-arrow-left-up-line")])],1)]}}],null,!0)},[e._v(" "),n("span",[e._v("Sélectionner l'image")])]):e._e(),e._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on,l=r.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""},on:{click:function(n){return e.editClickHandler(t)}}},"v-btn",l,!1),o),[n("v-icon",[e._v("ri-pencil-line")])],1)]}}],null,!0)},[e._v(" "),n("span",[e._v("Editer les propriétés de l'image")])])],1)],1)],1)})),1)],1)}),[],!1,null,null,null),J=G.exports;d()(G,{VBtn:v.a,VCard:f.a,VCardActions:m.a,VCardTitle:m.c,VCol:h.a,VContainer:_.a,VIcon:y.a,VImg:j.a,VRow:k.a,VSpacer:U.a,VTooltip:H.a});var W=n(534),X=Object(r.b)({props:{mediaNode:{type:Object,default:null},refresh:{type:Function,required:!0}},setup:function(e){var t=Object(r.q)(),n=Object(r.m)(null),dialog=Object(r.m)(!1),o=Object(r.m)(null);W.a.setContext(t),Object(r.h)((function(){n.value=document.getElementById("fileNavigatorContextMenu"),document.addEventListener(null!==document.ontouchstart?"click":"touchstart",l,!1)}));var l=function(e){e.target&&n.value&&(n.value.contains(e.target)||n.value&&(n.value.style.left="0px",n.value.style.top="0px",n.value.classList.remove("context-menu--active")))},c=function(){var t=Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(dialog.value=!1,o&&e.mediaNode){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,W.a.create({name:o.value,parent:e.mediaNode["@id"]});case 5:return t.next=7,e.refresh();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{newFolderName:o,dialog:dialog,onFolderCreate:c,showMenu:function(e){n.value&&(n.value.offsetWidth+e.pageX>=window.innerWidth?n.value.style.left=e.pageX-n.value.offsetWidth+2+"px":n.value.style.left=e.pageX-2+"px",n.value.offsetHeight+e.pageY>=window.innerHeight?n.value.style.top=e.pageY-n.value.offsetHeight+2+"px":n.value.style.top=e.pageY-2+"px",n.value.classList.add("context-menu--active"))}}}}),Y=(n(576),n(572)),z=n(502),K=n(515),Q=n(204),Z=n(124),ee=n(48),te=n(207),ne=n(108),re=n(501),ae=Object(l.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"context-menu",attrs:{id:"fileNavigatorContextMenu",tile:""}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{color:"primary"}},[e.mediaNode?n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-list-item",e._g(e._b({},"v-list-item",o,!1),r),[n("v-list-item-icon",[n("v-icon",[e._v("ri-folder-add-fill")])],1),e._v(" "),n("v-list-item-content",[e._v("\n              Nouveau dossier\n            ")])],1)]}}],null,!1,4239326002),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("\n            Ajouter un dossier\n          ")]),e._v(" "),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{label:"Nom du dossier",required:""},model:{value:e.newFolderName,callback:function(t){e.newFolderName=t},expression:"newFolderName"}})],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.onFolderCreate}},[e._v("\n              Créer le dossier\n            ")])],1)],1)],1):e._e()],1)],1)],1)}),[],!1,null,"2d92cf33",null),ie=ae.exports;d()(ae,{VBtn:v.a,VCard:f.a,VCardActions:m.a,VCardText:m.b,VCardTitle:m.c,VDialog:Y.a,VDivider:z.a,VForm:K.a,VIcon:y.a,VList:Q.a,VListItem:Z.a,VListItemContent:ee.a,VListItemGroup:te.a,VListItemIcon:ne.a,VSpacer:U.a,VTextField:re.a});var oe=Object(r.b)({components:{FileNavigatorBreadCrumb:R,FileNavigatorFolders:F,FileNavigatorFiles:J,FileNavigatorContextMenu:ie},props:{editClickHandler:{type:Function,required:!0},selectClickHandler:{type:Function,required:!0},currentMediaNode:{type:Object,default:null},rootName:{type:String,default:null}},setup:function(e,t){var n=t.emit,o=Object(r.q)();W.a.setContext(o),$.setContext(o);var l=Object(r.e)("closeDetailPanel"),c=Object(r.m)(null);Object(r.r)((function(){W.a.fetchAll({"exists[parent]":"false"})}));var d=function(){var e=Object(w.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $.resetList(),e.t0=n,e.next=4,W.a.load(t);case 4:e.t1=e.sent,(0,e.t0)("update:current-media-node",e.t1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var t=Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.currentMediaNode){t.next=2;break}return t.abrupt("return");case 2:return t.t0=n,t.next=5,W.a.load(e.currentMediaNode["@id"]);case 5:t.t1=t.sent,(0,t.t0)("update:current-media-node",t.t1),Object(r.f)((function(){f()}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=e.currentMediaNode;n("update:current-media-node",void 0),Object(r.f)((function(){n("update:current-media-node",t)}))};return{closeDetailPanel:l,fileNavigatorContextMenu:c,rootMediaNodes:W.a.rootNodes,handleMediaNodeClick:d,handleRootClick:function(){n("update:current-media-node",void 0),l&&l()},refresh:v,reload:f,onRightClick:function(e){var t;null===(t=c.value)||void 0===t||t.showMenu(e)}}}}),le=(n(578),Object(l.a)(oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",[n("h3",{staticClass:"navigator-title",on:{click:e.handleRootClick}},[n("v-btn",{attrs:{rounded:"",depressed:"",small:""}},[e._v("\n          Navigateur de fichier\n        ")])],1),e._v(" "),n("file-navigator-bread-crumb",{attrs:{"media-node":e.currentMediaNode,"media-node-click-handler":e.handleMediaNodeClick}})],1)],1),e._v(" "),e.currentMediaNode?n("v-row",{on:{contextmenu:function(t){return t.preventDefault(),e.onRightClick(t)}}},[n("v-col",{attrs:{cols:"12"}},[n("h4",[e._v("Dossiers")])]),e._v(" "),n("v-col",{attrs:{cols:"12"}},[e.currentMediaNode.children.length>0?n("file-navigator-folders",{attrs:{"media-node":e.currentMediaNode,"handle-click":e.handleMediaNodeClick}}):n("p",[e._v("\n        Aucun dossier\n      ")])],1)],1):e._e(),e._v(" "),e.currentMediaNode&&e.currentMediaNode.mediaObjects.length>0?n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h4",[e._v("Fichiers")])]),e._v(" "),n("v-col",[n("file-navigator-files",{attrs:{"select-click-handler":e.selectClickHandler,"edit-click-handler":e.editClickHandler,"media-node":e.currentMediaNode}})],1)],1):e._e(),e._v(" "),e.currentMediaNode?e._e():n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h4",[e._v("Sélectionner un dossier")])]),e._v(" "),e._l(e.rootMediaNodes,(function(t){return n("v-col",{key:t["@id"],attrs:{cols:"3"}},[n("v-btn",{on:{click:function(n){return e.handleMediaNodeClick(t["@id"])}}},[e._v("\n        "+e._s(t.name)+"\n      ")])],1)}))],2),e._v(" "),n("file-navigator-context-menu",{ref:"fileNavigatorContextMenu",attrs:{"media-node":e.currentMediaNode,refresh:e.refresh}})],1)}),[],!1,null,"ee76563c",null)),ce=le.exports;d()(le,{VBtn:v.a,VCol:h.a,VContainer:_.a,VRow:k.a});n(45);var ue=n(216),se=n(217),de=n(134),ve=n.n(de),fe=n(38),me=Object(r.b)({props:{values:{type:Object,required:!0},errors:{type:Object,default:function(){}},tree:{type:Array,default:function(){return[]}}},setup:function(e){var t=Object(r.a)((function(){return e.values})),n=Object(r.a)((function(){return{customName:{minLength:Object(se.c)(3)},mediaNodes:{minLength:Object(se.c)(1)}}})),o=Object(ue.a)(n,t),l=Object(r.a)((function(){return e.errors})),c=Object(r.a)((function(){var e=[];return o.value.customName&&o.value.customName.$dirty?(ve()(l.value,"customName")&&e.push(l.value.customName),o.value.customName.minLength.$invalid&&e.push("Le nom personnalisé doit faire au moins 3 caractères"),e):e})),d=Object(r.a)((function(){var e=[];return o.value.mediaNodes&&o.value.mediaNodes.$dirty?(ve()(l.value,"mediaNodes")&&e.push(l.value.mediaNodes),o.value.mediaNodes.minLength.$invalid&&e.push("Le fichier doit appartenir a au moins une galerie"),e):e}));return{item:t,v$:o,customNameErrors:c,mediaNodesErrors:d,state:fe.a.getState()}}}),pe=n(755),be=Object(l.a)(me,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Identifiant unique",disabled:""},model:{value:e.item.uniqueId,callback:function(t){e.$set(e.item,"uniqueId",t)},expression:"item.uniqueId"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Nom personnalisé","error-messages":e.customNameErrors,required:""},on:{input:function(t){return e.v$.customName.$touch()},blur:function(t){return e.v$.customName.$touch()}},model:{value:e.item.customName,callback:function(t){e.$set(e.item,"customName",t)},expression:"item.customName"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"12"}},[n("p",[e._v("Appartient aux catégories...")]),e._v(" "),e.errors&&e.errors.mediaNodes?n("p",{staticClass:"error--text"},[e._v("\n          "+e._s(e.errors.mediaNodes)+"\n        ")]):e._e(),e._v(" "),n("v-treeview",{attrs:{items:e.tree,selectable:"",rounded:"",hoverable:"","open-all":"","selection-type":"independent","item-key":"@id"},model:{value:e.item.mediaNodes,callback:function(t){e.$set(e.item,"mediaNodes",t)},expression:"item.mediaNodes"}})],1)],1)],1)],1)}),[],!1,null,null,null),he=be.exports;d()(be,{VCol:h.a,VContainer:_.a,VForm:K.a,VRow:k.a,VTextField:re.a,VTreeview:pe.a});var _e=n(98),ge=n(528),ye=Object(r.b)({components:{Toolbar:ge.a,FileDetailsForm:he},props:{mediaObject:{type:Object,required:!0}},setup:function(e){var t=Object(r.q)();W.a.setContext(t),$.setContext(t);var n=Object(r.e)("closeDetailPanel"),o=Object(r.a)((function(){return e.mediaObject})),l=Object(r.m)(null);Object(r.r)(Object(w.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==W.a.tree.value.length){e.next=3;break}return e.next=3,W.a.fetchTree();case 3:case"end":return e.stop()}}),e)}))));return Object(r.u)((function(){return $.getState().updated}),(function(e){e&&_e.a.showMessage("Fichier mis à jour")})),{item:o,state:$.getState(),tree:W.a.tree,closeDetailPanel:n,updateForm:l,onSendForm:function(){l.value&&(l.value.v$.$touch(),l.value.v$.$invalid||$.update(o.value))}}}}),je=Object(l.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",[n("h3",[e._v("\n        Détail du fichier\n        "),n("v-btn",{attrs:{rounded:"",right:"",fixed:"",small:"",color:"error"},on:{click:e.closeDetailPanel}},[n("v-icon",[e._v("\n            ri-close-line\n          ")])],1)],1)])],1),e._v(" "),n("v-row",[n("v-col",[n("file-details-form",{ref:"updateForm",attrs:{tree:e.tree,values:e.item,errors:e.state.violations}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("Toolbar",{attrs:{"handle-submit":e.onSendForm}})],1)],1)],1)}),[],!1,null,null,null),ke=je.exports;d()(je,{VBtn:v.a,VCol:h.a,VContainer:_.a,VIcon:y.a,VRow:k.a});var Oe=Object(r.b)({components:{FileSelection:O,FileUploader:x,FileNavigator:ce,FileDetails:ke},props:{showSelection:{type:Boolean,default:!0}},setup:function(e){var t=Object(r.m)(!1),n=Object(r.m)(null),o=Object(r.m)([]),l=Object(r.m)([]),c=Object(r.m)(null),d=Object(r.m)(null),v=Object(r.q)();Object(r.j)("closeDetailPanel",(function(){t.value=!1,n.value=null})),Object(r.j)("selectionEnabled",e.showSelection);var f=function(e){l.value.push({src:e.contentUrl})},m=function(e){o.value.push({src:e.contentUrl,name:e.filePath})};return{detailsPanel:t,selectedMediaObject:n,links:o,thumbnails:l,currentMediaNode:c,fileNavigator:d,selectMediaObject:function(e){e.isImage?f(e):m(e)},reset:function(){l.value=[],o.value=[]},removeThumbnail:function(e){l.value.splice(e,1)},removeLink:function(e){o.value.splice(e,1)},handleUpload:function(e){if(c.value)for(var i=0;i<e.length;i++){var t=e[i],n=new FormData;n.append("file",t),n.append("mediaNodeId",c.value.id.toString()),v.$getRepository("media_objects").$post("/api/media_objects",{method:"POST",body:n}).then((function(e){var t;e.isImage?f(e):m(e),null===(t=d.value)||void 0===t||t.refresh()}))}},editMediaObject:function(e){t.value=!0,n.value=e}}}}),Ce=Object(l.a)(Oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:e.detailsPanel?8:12}},[n("v-container",[e.showSelection?n("v-row",[n("v-col",[n("file-selection",{attrs:{thumbnails:e.thumbnails,links:e.links,"remove-link":e.removeLink,"remove-thumbnail":e.removeThumbnail}})],1)],1):e._e(),e._v(" "),n("v-row",[n("v-col",[n("file-navigator",{ref:"fileNavigator",attrs:{"select-click-handler":e.selectMediaObject,"current-media-node":e.currentMediaNode,"edit-click-handler":e.editMediaObject,"show-selection":e.showSelection},on:{"update:currentMediaNode":function(t){e.currentMediaNode=t},"update:current-media-node":function(t){e.currentMediaNode=t}}})],1)],1),e._v(" "),e.currentMediaNode?n("v-row",[n("v-col",[n("file-uploader",{attrs:{"handle-upload":e.handleUpload}})],1)],1):e._e()],1)],1),e._v(" "),e.detailsPanel?n("v-col",[n("v-container",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",[n("file-details",{attrs:{"media-object":e.selectedMediaObject}})],1)],1)],1)],1):e._e()],1)],1)}),[],!1,null,null,null);t.a=Ce.exports;d()(Ce,{VCol:h.a,VContainer:_.a,VRow:k.a})},738:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(581),l=Object(r.b)({components:{FileManager:o.a},layout:"admin",middleware:"hasPermissions",meta:{permissions:["USER_CAN_ACCESS_GALLERIES"]}}),c=n(32),d=n(41),v=n.n(d),f=n(517),m=n(523),h=n(519),component=Object(c.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",[t("v-row",[t("v-col",[t("file-manager",{attrs:{"show-selection":!1}})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VCol:f.a,VContainer:m.a,VRow:h.a})}}]);