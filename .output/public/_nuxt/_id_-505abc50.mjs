import{_ as p,d as _,m as f,u as E,p as b,q as h,s as x,o as m,c as y,e as g,f as v,C as c,k as C}from"./entry-87b30bf9.mjs";import{u as w}from"./asyncData-43007f1d.mjs";import{F as S}from"./FormComponent-2f0f58f8.mjs";import"./Editor-bac1da7c.mjs";import"./Tooltip-52fdeb63.mjs";import"./Icon-fefadd4a.mjs";import"./use-outside-click-8678eb71.mjs";import"./use-resolve-button-type-a71a440e.mjs";import"./dialog-f5e7a3df.mjs";import"./FileManager-1911a0cd.mjs";import"./TextField-1d5b5a19.mjs";import"./transition-3b170868.mjs";import"./CheckboxField-d03e3edb.mjs";const D=_({async setup(u,{expose:r}){r();let s,e;const t=f(),a=E(),i=b("page-edition",()=>null);[s,e]=h(async()=>w("async-page-edition",async()=>{await t.load(a.params.id,{"groups[]":"blog_article:read:edition"}),i.value=t[c.EDITION].retrieved})),await s,e();const n=x(),l={blogArticleStore:t,route:a,articleEdition:i,notificationStore:n,submit:async(o,d)=>{o.isPublished==="true"&&(o.isPublished=!1),o.showInMenu==="true"&&(o.showInMenu=!1);try{await t.update(o.id,o),n.showMessage("Article correctement \xE9dit\xE9e")}catch{n.showError("Erreur dans la sauvegarde l'article, v\xE9rifie le formulaire"),d.setErrors(t[c.Edition].violations)}},FormComponent:S,CRUD_MODE:c};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),A={class:"flex flex-col flex-auto p-3"},I=C("h1",{class:"mb-4"},"\xC9dition d'un article",-1);function k(u,r,s,e,t,a){return m(),y("div",A,[I,e.articleEdition?(m(),g(e.FormComponent,{key:0,article:e.articleEdition,"onUpdate:article":r[0]||(r[0]=i=>e.articleEdition=i),"submit-handler":e.submit,errors:e.blogArticleStore[e.CRUD_MODE.EDITION].violations},null,8,["article","errors"])):v("",!0)])}var J=p(D,[["render",k]]);export{J as default};
